<% set title="Programs for the FV-1 guitar pedal, Mimir's Well" %>
<% extends "partials/template.html" %>

<% block body %>
  <section class="page-section bg-dark text-white">
    <div class="container">
      <div class="row">
        <div class="col text-center mt-3">
          <h1 class="text-uppercase">Programs for Mimir's Well</h2>
          <div class="intro-lead-in">Bank Builder</div>
        </div>
      </div>
    </div>
  </section>

  <section class="page-section" id="bank-builder">

    <div class="container">

      <div class="row">
        <div class="col-12">
          <h2>Bank Builder: Program Selection</h2>
          <!--
          <p>I want to see...</p>
          -->
          <p>Your Mimir's Well pedal is 23 pedals in one. You can even <a href="https://mas-effects.square.site/product/bank-of-8-extra-programs-for-mimir-s-well/4?cp=true&sa=true&sbp=false&q=false" target="_blank">buy extra banks (only $2/each)</a> to expand your collection.
          It comes with <a href="#" @click.prevent="showRom = true">7 great built-in programs <small>(click to view)</small></a>, and you can use this page to <strong>choose up to 16 more</strong> custom ones.</p>
          <p>Feel free to pick more than 16, but just be sure to buy the extra bank(s) to hold them.</p>
        </div>
      </div>

      <div class="row" v-show="showRom">
        <div class="col">
          <p class="TODO">Show list of ROM programs</p>
        </div>
      </div>


      <div class="row">
        <div class="col-12 col-sm-6 col-lg-4 p-1">
          <div v-on:click="pickMode('banks')" :class="{ 'bank-builder-mode': true,  'p-2': true, selected: mode == 'banks' }">
            <div class="audience">SUPER Easy</div>
            <div>
              <i class="fas fa-layer-group mr-2"></i>
              Pre-built banks
            </div>
            <div>
              <em>Collections of programs, pre-assembled into banks of 8</em>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-6 col-lg-4 p-1">
          <div v-on:click="pickMode('list')" :class="{ 'bank-builder-mode': true,  'p-2': true, selected: mode == 'list' }">
            <div class="audience">Intermediate</div>
            <div>
              <i class="fas fa-th-list mr-2"></i>
              Curated list of programs
            </div>
            <div>
              <em>A large collection of programs for you to pick from</em>
            </div>
          </div>
        </div>
        <div class="col-12 col-sm-12 col-lg-4 p-1">
          <div v-on:click="pickMode('advanced')" :class="{ 'bank-builder-mode': true,  'p-2': true, selected: mode == 'advanced' }">
            <div class="audience">Advanced</div>
            <i class="fas fa-tools mr-2"></i>
            Even more...
            <div>
              <em>Get ready to roll up your sleeves!</em>
            </div>
          </div>
        </div>
      </div>

      <div class="anchor" id="builder-top"></div>

      <div class="row" v-show="mode == 'banks'">
        <div class="col-12">
          <h4 class="text-muted">Pre-built Banks</h4>
          <p>Sorry, these aren't yet available, but <a href="mailto:mark@mas-effects.com">email mark@mas-effects.com</a> and tell me what sort of collection you'd like to see and I'll put it together for you.</p>
        </div>
      </div>

      <div class="row" v-show="mode == 'advanced'">
        <div class="col-12">
          <h4 class="text-muted">Advanced</h4>
          <p>You can find even more programs by going to this master list: <a target="_blank" href="https://mstratman.github.io/fv1-programs/">https://mstratman.github.io/fv1-programs/</a>.</p>
          <p>Alternatively, if you find or make other programs you'd like added to your banks, that's not a problem.</p>
          <p>Simply <a href="mailto:mark@mas-effects.com">email mark@mas-effects.com</a> and I'll use them when making your EEPROMs.</p>
        </div>
      </div>

    </div>

    <div id="program-list" class="container" v-show="mode == 'list'">
      <div v-if="screenWidth < 770">
        <div class="alert alert-danger" role="alert">
          <h4 class="alert-heading">Screen Too Small!</h4>
          <!--
          <p>Using this page on a small screen is not recommended, as it'll be very hard to view the table below to compare programs. I recommend using a computer or tablet instead of a mobile phone.</p>
          <p>This page should still work fine if you continue, but be sure to <strong>scroll left and right</strong> on the table to see all 3 controls for each program.</p>
          -->
          <p>Be sure to <strong>scroll left and right</strong> on the table to see all 3 controls for each program. <small>(Or use a computer with a bigger screen)</small></p>
        </div>
      </div>

      <div v-show="showLoading" class="row">
        <div class="col-12 text-center">
          <div class="loading">
            <i class="fas fa-hourglass-start"></i>
            Loading
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="mt-4">
            <small>
              <strong><i class="fas fa-star text-warning" title="MAS Favorite"></i> <span class="text-warning">MAS Favorites</span></strong> are pedals I especially enjoy playing, and are good safe bets within each category.
            </small>
          </div>
          <div class="category" v-for="cat in categories">
            <div class="category-heading" @click="toggleCategory(cat)" :class="{open: showCategory[cat]}">
              <h2 class="link">{{cat}}</h2>
            </div>
            <div class="program-list table-responsive" v-show="showCategory[cat]">
              <table class="table">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Knob 1</th>
                    <th>Knob 2</th>
                    <th>Knob 3</th>
                  </tr>
                </thead>
                <tbody>
                  <template v-for="p in programsInCategory(cat)">
                    <tr @click="toggleProgram(cat, p.id)" :class="{'program-row': true, 'in-bank': banksById[p.id]}">
                      <td>
                        <i v-if="p['fav']" class="fas fa-star text-warning" title="MAS Favorite"></i>
                        {{p.name}}
                        <span v-if="p['description']" class="text-secondary"><br><small>(more info...)</small></span>
                      </td>
                      <template v-if="p['controls']">
                        <td>{{p.controls[0]}}</td>
                        <td>{{p.controls[1]}}</td>
                        <td>{{p.controls[2]}}</td>
                      </template>
                      <template v-else>
                        <td>?</td>
                        <td>?</td>
                        <td>?</td>
                      </template>
                    </tr>
                    <tr>
                      <td colspan="4" v-show="showProgram[cat + p.id]" :class="{'details': true, 'in-bank': banksById[p.id]}">
                        <p>{{p.description}}</p>
                        <div>
                          <button v-if="banksById[p.id]" type="button" class="btn btn-outline-primary" disabled>Added</button>
                          <button v-else type="button" class="btn btn-primary" @click="addProgram(p.id)">Add to bank</button>
                        </div>
                      </td>
                    </tr>
                  </template>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

  </section>

  <% if production %>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
  <% else %>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <% endif %>
  <script src="js/programs.min.js"></script>
  <% endblock %>
